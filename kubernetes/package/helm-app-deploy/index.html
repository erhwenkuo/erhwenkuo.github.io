<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=../../../assets/favicon.png rel=icon><meta content="mkdocs-1.3.1, mkdocs-material-8.3.9" name=generator><title>K8S 應用部署之 Helm 初探 - Tech Learning</title><link href=../../../assets/stylesheets/main.1d29e8d0.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.cbb835fc.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>html.glightbox-open { overflow: initial; height: 100%; }</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=red data-md-color-primary=indigo data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#k8s-helm> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Tech Learning" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Tech Learning"> <svg viewbox="0 0 89 89" xmlns=http://www.w3.org/2000/svg> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z></path> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"></path> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z></path> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"></path> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tech Learning </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> K8S 應用部署之 Helm 初探 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=red data-md-color-media data-md-color-primary=indigo data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=indigo data-md-color-media data-md-color-primary=brown data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <a aria-label=Share class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg> </a> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> Home </a> </li> <li class=md-tabs__item> <a href=../../01-getting-started/learning-env/k3d/k3s-kubernetes-cluster-setup-with-k3d/ class="md-tabs__link md-tabs__link--active"> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../argocd/tutorial/ class=md-tabs__link> ArgoCD </a> </li> <li class=md-tabs__item> <a href=../../../vault/docs/auth/overview/ class=md-tabs__link> Vault </a> </li> <li class=md-tabs__item> <a href=../../../ansible/vagrant-intro/ class=md-tabs__link> Ansible </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Tech Learning" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Tech Learning"> <svg viewbox="0 0 89 89" xmlns=http://www.w3.org/2000/svg> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z></path> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"></path> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z></path> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"></path> </svg> </a> Tech Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 id=__nav_1 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../..>Home</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Home class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_2 id=__nav_1_2 type=checkbox> <label class=md-nav__link for=__nav_1_2> Networking Basics <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Networking Basics" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Networking Basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../networking/cidr/cidr-intro/ class=md-nav__link> 無類別區隔路由 CIDR </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_3 id=__nav_1_3 type=checkbox> <label class=md-nav__link for=__nav_1_3> YAML <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=YAML class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> YAML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../yaml/yaml-intro/ class=md-nav__link> YAML 入門教程 </a> </li> <li class=md-nav__item> <a href=../../../yaml/yaml-tutorial/ class=md-nav__link> Learn YAML </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_4 id=__nav_1_4 type=checkbox> <label class=md-nav__link for=__nav_1_4> CI/CD <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=CI/CD class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> CI/CD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cicd/gitops/ class=md-nav__link> GitOps 的概念 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Kubernetes class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 id=__nav_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_1> Getting started <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Getting started" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1_1 id=__nav_2_1_1 type=checkbox> <label class=md-nav__link for=__nav_2_1_1> 學習環境 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=學習環境 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_1_1> <span class="md-nav__icon md-icon"></span> 學習環境 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1_1_1 id=__nav_2_1_1_1 type=checkbox> <label class=md-nav__link for=__nav_2_1_1_1> K3D <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=K3D class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_1_1_1> <span class="md-nav__icon md-icon"></span> K3D </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01-getting-started/learning-env/k3d/k3s-kubernetes-cluster-setup-with-k3d/ class=md-nav__link> 使用 K3D 設置 Kubernetes 集群 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1_1_2 id=__nav_2_1_1_2 type=checkbox> <label class=md-nav__link for=__nav_2_1_1_2> Minikube <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Minikube class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_1_1_2> <span class="md-nav__icon md-icon"></span> Minikube </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01-getting-started/learning-env/minikube/how-to-install-minikube-on-ubuntu/ class=md-nav__link> 如何在 Ubuntu 20.04 上安裝 Minikube </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 id=__nav_2_2 type=checkbox> <label class=md-nav__link for=__nav_2_2> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Concepts class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_1 id=__nav_2_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_2_1> 概述 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=概述 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> 概述 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-concepts/01-overview/k8s-intro/ class=md-nav__link> K8S 介詔 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_2 id=__nav_2_2_2 type=checkbox> <label class=md-nav__link for=__nav_2_2_2> 集群架構 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=集群架構 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> 集群架構 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-concepts/02-cluster-architecture/k8s-architecture/ class=md-nav__link> K8S 架構解析 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3 id=__nav_2_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_2_3> Serivce, 負載均衡與網路 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Serivce, 負載均衡與網路" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Serivce, 負載均衡與網路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-concepts/05-svc-lb-network/k8s-network-intro/ class=md-nav__link> K8S 網絡通信介紹 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_4 id=__nav_2_2_4 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../02-concepts/06-storage/ >存儲</a> </div> <nav aria-label=存儲 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> 存儲 </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_5 id=__nav_2_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_2_5> 配置 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=配置 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_2_5> <span class="md-nav__icon md-icon"></span> 配置 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-concepts/07-configuration/overview/ class=md-nav__link> 配置最佳實踐 </a> </li> <li class=md-nav__item> <a href=../../02-concepts/07-configuration/configmap/ class=md-nav__link> ConfigMap </a> </li> <li class=md-nav__item> <a href=../../02-concepts/07-configuration/secret/ class=md-nav__link> Secret </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 id=__nav_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_3> Tasks <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Tasks class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Tasks </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_1 id=__nav_2_3_1 type=checkbox> <label class=md-nav__link for=__nav_2_3_1> 管理 Kubernetes 对象 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="管理 Kubernetes 对象" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> 管理 Kubernetes 对象 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../03-tasks/manage-kubernetes-objects/kustomization/ class=md-nav__link> 使用 Kustomize 對 Kubernetes 對象進行聲明式管理 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 id=__nav_2_4 type=checkbox> <label class=md-nav__link for=__nav_2_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Tutorials class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../04-tutorials/hello-k3d/ class=md-nav__link> 你好, K3D </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_2 id=__nav_2_4_2 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../04-tutorials/kubernetes-basics/ >學習 Kubernetes 基礎知識</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label="學習 Kubernetes 基礎知識" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> 學習 Kubernetes 基礎知識 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/create-cluster/ class=md-nav__link> 創建集群 </a> </li> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/deploy-app/ class=md-nav__link> 部署應用 </a> </li> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/explore/ class=md-nav__link> 了解應用 </a> </li> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/expose/ class=md-nav__link> 公開曝露應用 </a> </li> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/scale/ class=md-nav__link> 縮放你的應用 </a> </li> <li class=md-nav__item> <a href=../../04-tutorials/kubernetes-basics/update/ class=md-nav__link> 更新你的應用 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_3 id=__nav_2_4_3 type=checkbox> <label class=md-nav__link for=__nav_2_4_3> 配置 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=配置 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> 配置 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../04-tutorials/configuration/configmap-secrets/ class=md-nav__link> ConfigMap 與 Secret </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_4 id=__nav_2_4_4 type=checkbox> <label class=md-nav__link for=__nav_2_4_4> 存儲 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=存儲 class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> 存儲 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../04-tutorials/volume/volume-pv-pvc/ class=md-nav__link> 存儲管理 volume、PV/PVC </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 id=__nav_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_5> Reference <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Reference class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 id=__nav_2_5_1 type=checkbox> <label class=md-nav__link for=__nav_2_5_1> API 概述 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="API 概述" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> API 概述 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-reference/using-api/working-with-k8s-api/ class=md-nav__link> 使用 K8S API </a> </li> <li class=md-nav__item> <a href=../../05-reference/using-api/kubernetes-api-structure-and-terminology/ class=md-nav__link> K8S API 基礎 </a> </li> <li class=md-nav__item> <a href=../../05-reference/using-api/kubernetes-api-call-simple-http-client/ class=md-nav__link> 用 HTTP 客戶端調用 K8S API </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 id=__nav_2_5_2 type=checkbox> <label class=md-nav__link for=__nav_2_5_2> API 存取權限控制 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="API 存取權限控制" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> API 存取權限控制 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-reference/access-authn-authz/rbac-intro/ class=md-nav__link> Kubernetes RBAC 介詔 </a> </li> <li class=md-nav__item> <a href=../../05-reference/access-authn-authz/k8s-authorization-of-sa-with-rbac/ class=md-nav__link> 使用 RBAC 設置服務帳戶權限 </a> </li> <li class=md-nav__item> <a href=../../05-reference/access-authn-authz/k8s-sa-jwt-rbac/ class=md-nav__link> ServiceAccounts、JWT-tokens、身份驗證和 RBAC 授權 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 id=__nav_2_6 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../ >Tools</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Tools class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2 id=__nav_2_6_2 type=checkbox> <label class=md-nav__link for=__nav_2_6_2> Packaging 管理 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Packaging 管理" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> Packaging 管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2_1 id=__nav_2_6_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_2_1> Helm <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Helm class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_6_2_1> <span class="md-nav__icon md-icon"></span> Helm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../helm-intro/ class=md-nav__link> Helm 入門教學 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> K8S 應用部署之 Helm 初探 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> K8S 應用部署之 Helm 初探 </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#kubernetes> Kubernetes 應用部署的挑戰 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm> 為什麼需要 helm? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_1> helm 介紹 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_2> helm 工作流程 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_3> helm 安裝 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_4> 使用 helm 管理應用生命週期 </a> <nav aria-label="使用 helm 管理應用生命週期" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#1-helm-create-chart> 步驟 1. helm create 創建 Chart </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#2-helm-install> 步驟 2. helm install 部署 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#3-helm-upgrade> 步驟 3. helm upgrade 更新 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#4-helm-rollback> 步驟 4. helm rollback 回滾 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#5-helm-uninstall> 步驟 5. helm uninstall 卸載 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm-yaml> helm 渲染 yaml </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_3 id=__nav_2_6_3 type=checkbox> <label class=md-nav__link for=__nav_2_6_3> Config 管理 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Config 管理" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> Config 管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_3_1 id=__nav_2_6_3_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_3_1> Kustomize <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Kustomize class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_6_3_1> <span class="md-nav__icon md-icon"></span> Kustomize </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../helm-intro/ class=md-nav__link> Kustomize 入門教學 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3> ArgoCD <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=ArgoCD class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> ArgoCD </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 id=__nav_3_1 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../argocd/tutorial/ >ArgoCD 教程</a> <label for=__nav_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label="ArgoCD 教程" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> ArgoCD 教程 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../argocd/tutorial/01-setup/ class=md-nav__link> ArgoCD 安裝設定 </a> </li> <li class=md-nav__item> <a href=../../../argocd/tutorial/02-getting_started/ class=md-nav__link> ArgoCD 入門 </a> </li> <li class=md-nav__item> <a href=../../../argocd/tutorial/03-kustomize/ class=md-nav__link> Kustomize </a> </li> <li class=md-nav__item> <a href=../../../argocd/tutorial/04-syncwaves-hooks/ class=md-nav__link> SyncWaves 與 Hooks </a> </li> <li class=md-nav__item> <a href=../../../argocd/tutorial/argo-cd-applicationset-controller/ class=md-nav__link> ApplicationSet 控制器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 id=__nav_3_2 type=checkbox> <label class=md-nav__link for=__nav_3_2> ArgoCD 插件 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="ArgoCD 插件" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> ArgoCD 插件 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../argocd/argocd-vault-plugin/secret-management-argocd-vault/ class=md-nav__link> 使用 Argo CD Vault 插件進行 Secret 管理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 id=__nav_3_3 type=checkbox> <label class=md-nav__link for=__nav_3_3> ApplicationSet Controller <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="ApplicationSet Controller" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> ApplicationSet Controller </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../argocd/applicationset/intro/ class=md-nav__link> 簡介 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4> Vault <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Vault class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Vault </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 id=__nav_4_1 type=checkbox> <label class=md-nav__link for=__nav_4_1> Docs <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Docs class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_1 id=__nav_4_1_1 type=checkbox> <label class=md-nav__link for=__nav_4_1_1> Auth Methods <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Auth Methods" class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> Auth Methods </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../vault/docs/auth/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../vault/docs/auth/kubernetes/ class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../vault/docs/auth/userpass/ class=md-nav__link> Username &amp; Password </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_2 id=__nav_4_1_2 type=checkbox> <label class=md-nav__link for=__nav_4_1_2> Platform <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Platform class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> Platform </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_2_1 id=__nav_4_1_2_1 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../vault/docs/platform/ >Kubernetes</a> <label for=__nav_4_1_2_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Kubernetes class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_1_2_1> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_2_1_2 id=__nav_4_1_2_1_2 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../vault/docs/platform/helm/ >Helm</a> </div> <nav aria-label=Helm class=md-nav data-md-level=5> <label class=md-nav__title for=__nav_4_1_2_1_2> <span class="md-nav__icon md-icon"></span> Helm </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 id=__nav_4_2 type=checkbox> <label class=md-nav__link for=__nav_4_2> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Tutorials class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1 id=__nav_4_2_1 type=checkbox> <label class=md-nav__link for=__nav_4_2_1> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Kubernetes class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../vault/kubernetes/kubernetes-sidecar/ class=md-nav__link> 通過 Vault Agent 容器將 Secret 注入 Kubernetes Pod </a> </li> <li class=md-nav__item> <a href=../../../vault/kubernetes/kubernetes-secret-store-driver/ class=md-nav__link> 通過容器存儲接口 (CSI) 掛載 Vault Secret </a> </li> <li class=md-nav__item> <a href=../../../vault/kubernetes/agent-kubernetes/ class=md-nav__link> Vault Agent 與 Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../vault/kubernetes/kubernetes-external-vault/ class=md-nav__link> Kubernetes 與外部 Vault 整合 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 id=__nav_5 type=checkbox> <label class=md-nav__link for=__nav_5> Ansible <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Ansible class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Ansible </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1 id=__nav_5_1 type=checkbox> <label class=md-nav__link for=__nav_5_1> 快速入門 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=快速入門 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> 快速入門 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ansible/vagrant-intro/ class=md-nav__link> Vagrant 快速入門 </a> </li> <li class=md-nav__item> <a href=../../../ansible/ansible-intro/ class=md-nav__link> Ansible 快速入門 </a> </li> <li class=md-nav__item> <a href=../../../ansible/ansible-cheatsheet/ class=md-nav__link> Ansible 使用指南 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2> Ansible Playbook 撰寫 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Ansible Playbook 撰寫" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Ansible Playbook 撰寫 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/creating-and-running-your-first-ansible-playbook/ class=md-nav__link> 如何創建與運行 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-define-tasks-in-ansible-playbooks/ class=md-nav__link> 如何定義任務 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-use-variables-in-ansible-playbooks/ class=md-nav__link> 如何使用變量 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-access-system-information-facts-in-ansible-playbooks/ class=md-nav__link> 如何訪問系統信息 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-use-conditionals-in-ansible-playbooks/ class=md-nav__link> 如何使用條件 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-use-loops-in-ansible-playbooks/ class=md-nav__link> 如何使用循環 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/understanding-privilege-escalation-in-ansible-playbooks/ class=md-nav__link> 了解權限提升 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-install-and-manage-system-packages-in-ansible-playbooks/ class=md-nav__link> 如何安裝和管理系統包 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-create-and-use-templates-in-ansible-playbooks/ class=md-nav__link> 如何創建和使用模板 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-define-and-use-handlers-in-ansible-playbooks/ class=md-nav__link> 如何定義和使用處理程序 </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_playbook/how-to-deploy-a-static-html-website-with-ansible-on-ubuntu-20-04-nginx/ class=md-nav__link> 如何使用Nginx部署靜態HTML網站 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 id=__nav_5_3 type=checkbox> <label class=md-nav__link for=__nav_5_3> Ansible AWX 教學 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Ansible AWX 教學" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Ansible AWX 教學 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ansible/tutorial_awx/how-to-install-ansible-awx/ class=md-nav__link> 如何在 Ubuntu 20.04 上安裝 Ansible AWX </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial_awx/ansible-awx-guide-basic-usage-and-configuration/ class=md-nav__link> Ansible AWX 基本使用和配置 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4> 教學 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=教學 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> 教學 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ansible/tutorial/ubuntu-insall-docker/ class=md-nav__link> 如何在 Ubuntu 20.04 上安裝 Docker </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial/ansible-install-docker/ class=md-nav__link> 如何使用 Ansible 在 Ubuntu 20.04 上安裝和設置 Docker </a> </li> <li class=md-nav__item> <a href=../../../ansible/tutorial/how-to-install-and-configure-ansible-on-ubuntu-22-04/ class=md-nav__link> 如何在 Ubuntu 22.04 上安裝和配置 Ansible </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#kubernetes> Kubernetes 應用部署的挑戰 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm> 為什麼需要 helm? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_1> helm 介紹 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_2> helm 工作流程 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_3> helm 安裝 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm_4> 使用 helm 管理應用生命週期 </a> <nav aria-label="使用 helm 管理應用生命週期" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#1-helm-create-chart> 步驟 1. helm create 創建 Chart </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#2-helm-install> 步驟 2. helm install 部署 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#3-helm-upgrade> 步驟 3. helm upgrade 更新 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#4-helm-rollback> 步驟 4. helm rollback 回滾 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#5-helm-uninstall> 步驟 5. helm uninstall 卸載 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#helm-yaml> helm 渲染 yaml </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=k8s-helm>K8S 應用部署之 helm 初探<a class=headerlink href=#k8s-helm title="Permanent link">¶</a></h1> <p>原文: <a href=https://javamana.com/2022/128/202205081436039676.html>https://javamana.com/2022/128/202205081436039676.html</a></p> <p><a class=glightbox href=../assets/helm-workflow2.png><img alt src=../assets/helm-workflow2.png></a></p> <h2 id=kubernetes>Kubernetes 應用部署的挑戰<a class=headerlink href=#kubernetes title="Permanent link">¶</a></h2> <p>Kubernetes 是一個提供了基於容器的應用叢集管理解決方案，Kubernetes 為容器化應用提供了部署執行、資源排程、服務發現和動態伸縮等一系列完整功能。</p> <p>Kubernetes 的核心設計理念是: 使用者定義要部署的應用程式的規則，而 Kubernetes 則負責按照定義的規則部署並執行應用程式。如果應用程式出現問題導致偏離了定義的規格，Kubernetes 負責對其進行自動修正。例如：定義的應用規則要求部署兩個例項（Pod），其中一個例項異常終止了，Kubernetes 會檢查到並重新啟動一個新的例項。</p> <p>使用者通過使用 Kubernetes API 物件來描述應用程式規則，包括 Pod、Service、Volume、Namespace、ReplicaSet、Deployment、Job等等。一般這些資源物件的定義需要寫入一系列的 YAML 檔案中，然後通過 Kubernetes 命令列工具 Kubectl 調 Kubernetes API 進行部署。</p> <p>以一個典型的三層應用 Wordpress 為例，該應用程式就涉及到多個 Kubernetes API 物件，而要描述這些 Kubernetes API 物件就可能要同時維護多個 YAML 檔案。</p> <p><a class=glightbox href=../assets/helm-why.png><img alt src=../assets/helm-why.png></a></p> <p>從上圖可以看到，在進行 Kubernetes 軟體部署時，我們面臨下述幾個問題：</p> <ul> <li>如何管理、編輯和更新這些這些分散的 Kubernetes 應用配置檔案。</li> <li>如何把一套相關的配置檔案作為一個應用進行管理。</li> <li>如何分發和重用 Kubernetes 的應用配置。</li> </ul> <h2 id=helm>為什麼需要 helm?<a class=headerlink href=#helm title="Permanent link">¶</a></h2> <p><a class=glightbox href=../assets/why-helm.png><img alt src=../assets/why-helm.png></a></p> <p>由於 Kubernetes 缺少對發布的應用版本管理和控制，使得部署的應用維護和更新等面臨諸多的挑戰，主要面臨以下問題：</p> <ul> <li>如何將這些服務作為一個整體管理？</li> <li>這些資源文件如何高效復用？</li> <li>不支持應用級別的版本管理</li> </ul> <h2 id=helm_1>helm 介紹<a class=headerlink href=#helm_1 title="Permanent link">¶</a></h2> <p>Helm 是一個 Kubernetes 的包管理工具，就像 Linux下 的包管理器，如 yum/apt 等，可以很方便的將之前打包好的 yaml 文件部署到 kubernetes 上。</p> <p>Helm 有3個重要概念：</p> <ul> <li><strong>helm</strong>：一個命令行客戶端工具，主要用於 Kubernetes 應用 chart 的創建、打包、發布和管理。</li> <li><strong>Chart</strong>：應用描述，一系列用於描述 k8s 資源相關文件的集合。</li> <li><strong>Release</strong>：基於 Chart 的部署實體，一個 chart 被 Helm 運行後將會生成對應的一個 release；將在 k8s中 創建出真實運行的資源對象。</li> </ul> <p><a class=glightbox href=../assets/helm-v2-v3.png><img alt src=../assets/helm-v2-v3.png></a></p> <h2 id=helm_2>helm 工作流程<a class=headerlink href=#helm_2 title="Permanent link">¶</a></h2> <p><a class=glightbox href=../assets/helm-workflow.png><img alt src=../assets/helm-workflow.png></a></p> <h2 id=helm_3>helm 安裝<a class=headerlink href=#helm_3 title="Permanent link">¶</a></h2> <p>使用 helm 很簡單，你只需要下載一個二進制客戶端包即可，helm 會通過 kubeconfig 配置（通常 <code>$HOME/.kube/config</code>）來連接 Kubernetes。</p> <p>以下是通過脚本安装 helm 的命令，其他的安裝方式可參考<a href=https://helm.sh/docs/intro/install/ >官網</a>：</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>$ chmod <span class=m>700</span> get_helm.sh
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>$ ./get_helm.sh
</code></pre></div> <h2 id=helm_4>使用 helm 管理應用生命週期<a class=headerlink href=#helm_4 title="Permanent link">¶</a></h2> <p>接下來我們會使用 helm 來管理一個應用的生命週期：</p> <ol> <li>helm create 創建 Chart</li> <li>helm install 部署</li> <li>helm upgrade 更新</li> <li>helm rollback 回滾</li> <li>helm uninstall 卸載</li> </ol> <p><a class=glightbox href=../assets/helm3.gif><img alt src=../assets/helm3.gif></a></p> <hr> <p><a class=glightbox href=../assets/helm-workflow.jpg><img alt src=../assets/helm-workflow.jpg></a></p> <h3 id=1-helm-create-chart>步驟 1. helm create 創建 Chart<a class=headerlink href=#1-helm-create-chart title="Permanent link">¶</a></h3> <p>创建一個新的 chart：</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>helm create mychart
</code></pre></div> <p>helm 會在現在的目錄下創建一個<code>mychart</code>的目錄, 它的結構如下:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a>mychart/
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a>├── charts
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a>├── Chart.yaml
<a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a>├── templates
<a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a>│   ├── deployment.yaml
<a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a>│   ├── _helpers.tpl
<a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a>│   ├── hpa.yaml
<a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a>│   ├── ingress.yaml
<a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a>│   ├── NOTES.txt
<a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a>│   ├── serviceaccount.yaml
<a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a>│   ├── service.yaml
<a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a>│   └── tests
<a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a>│       └── test-connection.yaml
<a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a>└── values.yaml
</code></pre></div> <ul> <li><strong>Chart.yaml</strong>：用於描述這個 Chart 的基本信息，包括名字、描述信息以及 版本等。</li> <li><strong>values.yaml</strong>：用於存儲 templates 目錄中模板文件中用到變量的值。</li> <li><strong>charts</strong>：目錄裡存放這個 chart 依賴的所有子 chart。</li> <li><strong>templates</strong>： 目錄裡面存放所有 yaml 模板文件。<ul> <li>NOTES.txt ：用於介紹 Chart 幫助信息， helm install 部署後展示給用戶。例如：如何使用這個 Chart、列出缺省的設置等。</li> <li>helpers.tpl：放置模板的地方，可以在整個 chart 中重複使用。</li> </ul> </li> </ul> <div class=highlight><span class=filename>mychart/Chart.yaml</span><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v2</span><span class=w></span>
<a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mychart</span><span class=w></span>
<a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">A Helm chart for Kubernetes</span><span class=w></span>
<a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">application</span><span class=w></span>
<a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1.</span><span class=w></span>
<a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=nt>appVersion</span><span class=p>:</span><span class=w> </span><span class=s>"1.16.0"</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/templates/deployment.yaml</span><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class=w></span>
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class=w></span>
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.fullname" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.labels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- if not .Values.autoscaling.enabled</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.replicaCount</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.selectorLabels" . | nindent 6</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.podAnnotations</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.selectorLabels" . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-23 id=__codelineno-4-23 name=__codelineno-4-23></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.imagePullSecrets</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-24 id=__codelineno-4-24 name=__codelineno-4-24></a><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-25 id=__codelineno-4-25 name=__codelineno-4-25></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-26 id=__codelineno-4-26 name=__codelineno-4-26></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-27 id=__codelineno-4-27 name=__codelineno-4-27></a><span class=w>      </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.serviceAccountName" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-28 id=__codelineno-4-28 name=__codelineno-4-28></a><span class=w>      </span><span class=nt>securityContext</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-29 id=__codelineno-4-29 name=__codelineno-4-29></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml .Values.podSecurityContext | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-30 id=__codelineno-4-30 name=__codelineno-4-30></a><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-31 id=__codelineno-4-31 name=__codelineno-4-31></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Chart.Name</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-32 id=__codelineno-4-32 name=__codelineno-4-32></a><span class=w>          </span><span class=nt>securityContext</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-33 id=__codelineno-4-33 name=__codelineno-4-33></a><span class=w>            </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml .Values.securityContext | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-34 id=__codelineno-4-34 name=__codelineno-4-34></a><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s>"{{</span><span class=nv> </span><span class=s>.Values.image.repository</span><span class=nv> </span><span class=s>}}:{{</span><span class=nv> </span><span class=s>.Values.image.tag</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>default</span><span class=nv> </span><span class=s>.Chart.AppVersion</span><span class=nv> </span><span class=s>}}"</span><span class=w></span>
<a href=#__codelineno-4-35 id=__codelineno-4-35 name=__codelineno-4-35></a><span class=w>          </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.image.pullPolicy</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-36 id=__codelineno-4-36 name=__codelineno-4-36></a><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-37 id=__codelineno-4-37 name=__codelineno-4-37></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class=w></span>
<a href=#__codelineno-4-38 id=__codelineno-4-38 name=__codelineno-4-38></a><span class=w>              </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class=w></span>
<a href=#__codelineno-4-39 id=__codelineno-4-39 name=__codelineno-4-39></a><span class=w>              </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span><span class=w></span>
<a href=#__codelineno-4-40 id=__codelineno-4-40 name=__codelineno-4-40></a><span class=w>          </span><span class=nt>livenessProbe</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-41 id=__codelineno-4-41 name=__codelineno-4-41></a><span class=w>            </span><span class=nt>httpGet</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-42 id=__codelineno-4-42 name=__codelineno-4-42></a><span class=w>              </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span><span class=w></span>
<a href=#__codelineno-4-43 id=__codelineno-4-43 name=__codelineno-4-43></a><span class=w>              </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class=w></span>
<a href=#__codelineno-4-44 id=__codelineno-4-44 name=__codelineno-4-44></a><span class=w>          </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-45 id=__codelineno-4-45 name=__codelineno-4-45></a><span class=w>            </span><span class=nt>httpGet</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-46 id=__codelineno-4-46 name=__codelineno-4-46></a><span class=w>              </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span><span class=w></span>
<a href=#__codelineno-4-47 id=__codelineno-4-47 name=__codelineno-4-47></a><span class=w>              </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class=w></span>
<a href=#__codelineno-4-48 id=__codelineno-4-48 name=__codelineno-4-48></a><span class=w>          </span><span class=nt>resources</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-49 id=__codelineno-4-49 name=__codelineno-4-49></a><span class=w>            </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml .Values.resources | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-50 id=__codelineno-4-50 name=__codelineno-4-50></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.nodeSelector</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-51 id=__codelineno-4-51 name=__codelineno-4-51></a><span class=w>      </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-52 id=__codelineno-4-52 name=__codelineno-4-52></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-53 id=__codelineno-4-53 name=__codelineno-4-53></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-54 id=__codelineno-4-54 name=__codelineno-4-54></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.affinity</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-55 id=__codelineno-4-55 name=__codelineno-4-55></a><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-56 id=__codelineno-4-56 name=__codelineno-4-56></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-57 id=__codelineno-4-57 name=__codelineno-4-57></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-58 id=__codelineno-4-58 name=__codelineno-4-58></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.tolerations</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-59 id=__codelineno-4-59 name=__codelineno-4-59></a><span class=w>      </span><span class=nt>tolerations</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-4-60 id=__codelineno-4-60 name=__codelineno-4-60></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-4-61 id=__codelineno-4-61 name=__codelineno-4-61></a><span class=w>      </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/templates/hpa.yaml</span><pre><span></span><code><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a><span class="p p-Indicator">{{</span><span class=nv>- if .Values.autoscaling.enabled</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">autoscaling/v2beta1</span><span class=w></span>
<a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">HorizontalPodAutoscaler</span><span class=w></span>
<a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.fullname" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.labels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a><span class=w>  </span><span class=nt>scaleTargetRef</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a><span class=w>    </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class=w></span>
<a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class=w></span>
<a href=#__codelineno-5-12 id=__codelineno-5-12 name=__codelineno-5-12></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.fullname" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-13 id=__codelineno-5-13 name=__codelineno-5-13></a><span class=w>  </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.autoscaling.minReplicas</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-14 id=__codelineno-5-14 name=__codelineno-5-14></a><span class=w>  </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.autoscaling.maxReplicas</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-15 id=__codelineno-5-15 name=__codelineno-5-15></a><span class=w>  </span><span class=nt>metrics</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-16 id=__codelineno-5-16 name=__codelineno-5-16></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- if .Values.autoscaling.targetCPUUtilizationPercentage</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-17 id=__codelineno-5-17 name=__codelineno-5-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span><span class=w></span>
<a href=#__codelineno-5-18 id=__codelineno-5-18 name=__codelineno-5-18></a><span class=w>      </span><span class=nt>resource</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-19 id=__codelineno-5-19 name=__codelineno-5-19></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span><span class=w></span>
<a href=#__codelineno-5-20 id=__codelineno-5-20 name=__codelineno-5-20></a><span class=w>        </span><span class=nt>targetAverageUtilization</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.autoscaling.targetCPUUtilizationPercentage</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-21 id=__codelineno-5-21 name=__codelineno-5-21></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-22 id=__codelineno-5-22 name=__codelineno-5-22></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- if .Values.autoscaling.targetMemoryUtilizationPercentage</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-23 id=__codelineno-5-23 name=__codelineno-5-23></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span><span class=w></span>
<a href=#__codelineno-5-24 id=__codelineno-5-24 name=__codelineno-5-24></a><span class=w>      </span><span class=nt>resource</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-5-25 id=__codelineno-5-25 name=__codelineno-5-25></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">memory</span><span class=w></span>
<a href=#__codelineno-5-26 id=__codelineno-5-26 name=__codelineno-5-26></a><span class=w>        </span><span class=nt>targetAverageUtilization</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.autoscaling.targetMemoryUtilizationPercentage</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-27 id=__codelineno-5-27 name=__codelineno-5-27></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-5-28 id=__codelineno-5-28 name=__codelineno-5-28></a><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/templates/ingress.yaml</span><pre><span></span><code><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a><span class="p p-Indicator">{{</span><span class=nv>- if .Values.ingress.enabled -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a><span class="p p-Indicator">{{</span><span class=nv>- $fullName</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= include "mychart.fullname" . -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a><span class="p p-Indicator">{{</span><span class=nv>- $svcPort</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= .Values.service.port -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a><span class="p p-Indicator">{{</span><span class=nv>- if and .Values.ingress.className (not (semverCompare "&gt;=1.18-0" .Capabilities.KubeVersion.GitVersion))</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- if not (hasKey .Values.ingress.annotations "kubernetes.io/ingress.class")</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- $_</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= set .Values.ingress.annotations "kubernetes.io/ingress.class" .Values.ingress.className</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-8 id=__codelineno-6-8 name=__codelineno-6-8></a><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-9 id=__codelineno-6-9 name=__codelineno-6-9></a><span class="p p-Indicator">{{</span><span class=nv>- if semverCompare "&gt;=1.19-0" .Capabilities.KubeVersion.GitVersion -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-10 id=__codelineno-6-10 name=__codelineno-6-10></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span><span class=w></span>
<a href=#__codelineno-6-11 id=__codelineno-6-11 name=__codelineno-6-11></a><span class="p p-Indicator">{{</span><span class=nv>- else if semverCompare "&gt;=1.14-0" .Capabilities.KubeVersion.GitVersion -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-12 id=__codelineno-6-12 name=__codelineno-6-12></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1beta1</span><span class=w></span>
<a href=#__codelineno-6-13 id=__codelineno-6-13 name=__codelineno-6-13></a><span class="p p-Indicator">{{</span><span class=nv>- else -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-14 id=__codelineno-6-14 name=__codelineno-6-14></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">extensions/v1beta1</span><span class=w></span>
<a href=#__codelineno-6-15 id=__codelineno-6-15 name=__codelineno-6-15></a><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-16 id=__codelineno-6-16 name=__codelineno-6-16></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span><span class=w></span>
<a href=#__codelineno-6-17 id=__codelineno-6-17 name=__codelineno-6-17></a><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-18 id=__codelineno-6-18 name=__codelineno-6-18></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$fullName</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-19 id=__codelineno-6-19 name=__codelineno-6-19></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-20 id=__codelineno-6-20 name=__codelineno-6-20></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.labels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-21 id=__codelineno-6-21 name=__codelineno-6-21></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.ingress.annotations</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-22 id=__codelineno-6-22 name=__codelineno-6-22></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-23 id=__codelineno-6-23 name=__codelineno-6-23></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-24 id=__codelineno-6-24 name=__codelineno-6-24></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-25 id=__codelineno-6-25 name=__codelineno-6-25></a><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-26 id=__codelineno-6-26 name=__codelineno-6-26></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- if and .Values.ingress.className (semverCompare "&gt;=1.18-0" .Capabilities.KubeVersion.GitVersion)</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-27 id=__codelineno-6-27 name=__codelineno-6-27></a><span class=w>  </span><span class=nt>ingressClassName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.ingress.className</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-28 id=__codelineno-6-28 name=__codelineno-6-28></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-29 id=__codelineno-6-29 name=__codelineno-6-29></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- if .Values.ingress.tls</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-30 id=__codelineno-6-30 name=__codelineno-6-30></a><span class=w>  </span><span class=nt>tls</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-31 id=__codelineno-6-31 name=__codelineno-6-31></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- range .Values.ingress.tls</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-32 id=__codelineno-6-32 name=__codelineno-6-32></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hosts</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-33 id=__codelineno-6-33 name=__codelineno-6-33></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- range .hosts</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-34 id=__codelineno-6-34 name=__codelineno-6-34></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>. | quote</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-35 id=__codelineno-6-35 name=__codelineno-6-35></a><span class=w>        </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-36 id=__codelineno-6-36 name=__codelineno-6-36></a><span class=w>      </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.secretName</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-37 id=__codelineno-6-37 name=__codelineno-6-37></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-38 id=__codelineno-6-38 name=__codelineno-6-38></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-39 id=__codelineno-6-39 name=__codelineno-6-39></a><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-40 id=__codelineno-6-40 name=__codelineno-6-40></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- range .Values.ingress.hosts</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-41 id=__codelineno-6-41 name=__codelineno-6-41></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.host | quote</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-42 id=__codelineno-6-42 name=__codelineno-6-42></a><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-43 id=__codelineno-6-43 name=__codelineno-6-43></a><span class=w>        </span><span class=nt>paths</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-44 id=__codelineno-6-44 name=__codelineno-6-44></a><span class=w>          </span><span class="p p-Indicator">{{</span><span class=nv>- range .paths</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-45 id=__codelineno-6-45 name=__codelineno-6-45></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.path</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-46 id=__codelineno-6-46 name=__codelineno-6-46></a><span class=w>            </span><span class="p p-Indicator">{{</span><span class=nv>- if and .pathType (semverCompare "&gt;=1.18-0" $.Capabilities.KubeVersion.GitVersion)</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-47 id=__codelineno-6-47 name=__codelineno-6-47></a><span class=w>            </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.pathType</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-48 id=__codelineno-6-48 name=__codelineno-6-48></a><span class=w>            </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-49 id=__codelineno-6-49 name=__codelineno-6-49></a><span class=w>            </span><span class=nt>backend</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-50 id=__codelineno-6-50 name=__codelineno-6-50></a><span class=w>              </span><span class="p p-Indicator">{{</span><span class=nv>- if semverCompare "&gt;=1.19-0" $.Capabilities.KubeVersion.GitVersion</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-51 id=__codelineno-6-51 name=__codelineno-6-51></a><span class=w>              </span><span class=nt>service</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-52 id=__codelineno-6-52 name=__codelineno-6-52></a><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$fullName</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-53 id=__codelineno-6-53 name=__codelineno-6-53></a><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-6-54 id=__codelineno-6-54 name=__codelineno-6-54></a><span class=w>                  </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$svcPort</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-55 id=__codelineno-6-55 name=__codelineno-6-55></a><span class=w>              </span><span class="p p-Indicator">{{</span><span class=nv>- else</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-56 id=__codelineno-6-56 name=__codelineno-6-56></a><span class=w>              </span><span class=nt>serviceName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$fullName</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-57 id=__codelineno-6-57 name=__codelineno-6-57></a><span class=w>              </span><span class=nt>servicePort</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$svcPort</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-58 id=__codelineno-6-58 name=__codelineno-6-58></a><span class=w>              </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-59 id=__codelineno-6-59 name=__codelineno-6-59></a><span class=w>          </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-60 id=__codelineno-6-60 name=__codelineno-6-60></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-6-61 id=__codelineno-6-61 name=__codelineno-6-61></a><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/templates/serviceaccount.yaml</span><pre><span></span><code><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class="p p-Indicator">{{</span><span class=nv>- if .Values.serviceAccount.create -</span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class=w></span>
<a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span><span class=w></span>
<a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-7-5 id=__codelineno-7-5 name=__codelineno-7-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.serviceAccountName" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-6 id=__codelineno-7-6 name=__codelineno-7-6></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-7-7 id=__codelineno-7-7 name=__codelineno-7-7></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.labels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-8 id=__codelineno-7-8 name=__codelineno-7-8></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- with .Values.serviceAccount.annotations</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-9 id=__codelineno-7-9 name=__codelineno-7-9></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-7-10 id=__codelineno-7-10 name=__codelineno-7-10></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- toYaml . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-11 id=__codelineno-7-11 name=__codelineno-7-11></a><span class=w>  </span><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-7-12 id=__codelineno-7-12 name=__codelineno-7-12></a><span class="p p-Indicator">{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/templates/service.yaml</span><pre><span></span><code><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class=w></span>
<a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Service</span><span class=w></span>
<a href=#__codelineno-8-3 id=__codelineno-8-3 name=__codelineno-8-3></a><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-8-4 id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>include "mychart.fullname" .</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-8-5 id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-8-6 id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.labels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-8-7 id=__codelineno-8-7 name=__codelineno-8-7></a><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-8-8 id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.service.type</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-8-9 id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-8-10 id=__codelineno-8-10 name=__codelineno-8-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.service.port</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<a href=#__codelineno-8-11 id=__codelineno-8-11 name=__codelineno-8-11></a><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class=w></span>
<a href=#__codelineno-8-12 id=__codelineno-8-12 name=__codelineno-8-12></a><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span><span class=w></span>
<a href=#__codelineno-8-13 id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class=w></span>
<a href=#__codelineno-8-14 id=__codelineno-8-14 name=__codelineno-8-14></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-8-15 id=__codelineno-8-15 name=__codelineno-8-15></a><span class=w>    </span><span class="p p-Indicator">{{</span><span class=nv>- include "mychart.selectorLabels" . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
</code></pre></div> <div class=highlight><span class=filename>mychart/values.yaml</span><pre><span></span><code><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a><span class=c1># Default values for mychart.</span><span class=w></span>
<a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a><span class=c1># This is a YAML-formatted file.</span><span class=w></span>
<a href=#__codelineno-9-3 id=__codelineno-9-3 name=__codelineno-9-3></a><span class=c1># Declare variables to be passed into your templates.</span><span class=w></span>
<a href=#__codelineno-9-4 id=__codelineno-9-4 name=__codelineno-9-4></a>
<a href=#__codelineno-9-5 id=__codelineno-9-5 name=__codelineno-9-5></a><span class=nt>replicaCount</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a href=#__codelineno-9-6 id=__codelineno-9-6 name=__codelineno-9-6></a>
<a href=#__codelineno-9-7 id=__codelineno-9-7 name=__codelineno-9-7></a><span class=nt>image</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-8 id=__codelineno-9-8 name=__codelineno-9-8></a><span class=w>  </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span><span class=w></span>
<a href=#__codelineno-9-9 id=__codelineno-9-9 name=__codelineno-9-9></a><span class=w>  </span><span class=nt>pullPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span><span class=w></span>
<a href=#__codelineno-9-10 id=__codelineno-9-10 name=__codelineno-9-10></a><span class=w>  </span><span class=c1># Overrides the image tag whose default is the chart appVersion.</span><span class=w></span>
<a href=#__codelineno-9-11 id=__codelineno-9-11 name=__codelineno-9-11></a><span class=w>  </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class=s>""</span><span class=w></span>
<a href=#__codelineno-9-12 id=__codelineno-9-12 name=__codelineno-9-12></a>
<a href=#__codelineno-9-13 id=__codelineno-9-13 name=__codelineno-9-13></a><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[]</span><span class=w></span>
<a href=#__codelineno-9-14 id=__codelineno-9-14 name=__codelineno-9-14></a><span class=nt>nameOverride</span><span class=p>:</span><span class=w> </span><span class=s>""</span><span class=w></span>
<a href=#__codelineno-9-15 id=__codelineno-9-15 name=__codelineno-9-15></a><span class=nt>fullnameOverride</span><span class=p>:</span><span class=w> </span><span class=s>""</span><span class=w></span>
<a href=#__codelineno-9-16 id=__codelineno-9-16 name=__codelineno-9-16></a>
<a href=#__codelineno-9-17 id=__codelineno-9-17 name=__codelineno-9-17></a><span class=nt>serviceAccount</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-18 id=__codelineno-9-18 name=__codelineno-9-18></a><span class=w>  </span><span class=c1># Specifies whether a service account should be created</span><span class=w></span>
<a href=#__codelineno-9-19 id=__codelineno-9-19 name=__codelineno-9-19></a><span class=w>  </span><span class=nt>create</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<a href=#__codelineno-9-20 id=__codelineno-9-20 name=__codelineno-9-20></a><span class=w>  </span><span class=c1># Annotations to add to the service account</span><span class=w></span>
<a href=#__codelineno-9-21 id=__codelineno-9-21 name=__codelineno-9-21></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-22 id=__codelineno-9-22 name=__codelineno-9-22></a><span class=w>  </span><span class=c1># The name of the service account to use.</span><span class=w></span>
<a href=#__codelineno-9-23 id=__codelineno-9-23 name=__codelineno-9-23></a><span class=w>  </span><span class=c1># If not set and create is true, a name is generated using the fullname template</span><span class=w></span>
<a href=#__codelineno-9-24 id=__codelineno-9-24 name=__codelineno-9-24></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>""</span><span class=w></span>
<a href=#__codelineno-9-25 id=__codelineno-9-25 name=__codelineno-9-25></a>
<a href=#__codelineno-9-26 id=__codelineno-9-26 name=__codelineno-9-26></a><span class=nt>podAnnotations</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-27 id=__codelineno-9-27 name=__codelineno-9-27></a>
<a href=#__codelineno-9-28 id=__codelineno-9-28 name=__codelineno-9-28></a><span class=nt>podSecurityContext</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-29 id=__codelineno-9-29 name=__codelineno-9-29></a><span class=w>  </span><span class=c1># fsGroup: 2000</span><span class=w></span>
<a href=#__codelineno-9-30 id=__codelineno-9-30 name=__codelineno-9-30></a>
<a href=#__codelineno-9-31 id=__codelineno-9-31 name=__codelineno-9-31></a><span class=nt>securityContext</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-32 id=__codelineno-9-32 name=__codelineno-9-32></a><span class=w>  </span><span class=c1># capabilities:</span><span class=w></span>
<a href=#__codelineno-9-33 id=__codelineno-9-33 name=__codelineno-9-33></a><span class=w>  </span><span class=c1>#   drop:</span><span class=w></span>
<a href=#__codelineno-9-34 id=__codelineno-9-34 name=__codelineno-9-34></a><span class=w>  </span><span class=c1>#   - ALL</span><span class=w></span>
<a href=#__codelineno-9-35 id=__codelineno-9-35 name=__codelineno-9-35></a><span class=w>  </span><span class=c1># readOnlyRootFilesystem: true</span><span class=w></span>
<a href=#__codelineno-9-36 id=__codelineno-9-36 name=__codelineno-9-36></a><span class=w>  </span><span class=c1># runAsNonRoot: true</span><span class=w></span>
<a href=#__codelineno-9-37 id=__codelineno-9-37 name=__codelineno-9-37></a><span class=w>  </span><span class=c1># runAsUser: 1000</span><span class=w></span>
<a href=#__codelineno-9-38 id=__codelineno-9-38 name=__codelineno-9-38></a>
<a href=#__codelineno-9-39 id=__codelineno-9-39 name=__codelineno-9-39></a><span class=nt>service</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-40 id=__codelineno-9-40 name=__codelineno-9-40></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span><span class=w></span>
<a href=#__codelineno-9-41 id=__codelineno-9-41 name=__codelineno-9-41></a><span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class=w></span>
<a href=#__codelineno-9-42 id=__codelineno-9-42 name=__codelineno-9-42></a>
<a href=#__codelineno-9-43 id=__codelineno-9-43 name=__codelineno-9-43></a><span class=nt>ingress</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-44 id=__codelineno-9-44 name=__codelineno-9-44></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<a href=#__codelineno-9-45 id=__codelineno-9-45 name=__codelineno-9-45></a><span class=w>  </span><span class=nt>className</span><span class=p>:</span><span class=w> </span><span class=s>""</span><span class=w></span>
<a href=#__codelineno-9-46 id=__codelineno-9-46 name=__codelineno-9-46></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-47 id=__codelineno-9-47 name=__codelineno-9-47></a><span class=w>    </span><span class=c1># kubernetes.io/ingress.class: nginx</span><span class=w></span>
<a href=#__codelineno-9-48 id=__codelineno-9-48 name=__codelineno-9-48></a><span class=w>    </span><span class=c1># kubernetes.io/tls-acme: "true"</span><span class=w></span>
<a href=#__codelineno-9-49 id=__codelineno-9-49 name=__codelineno-9-49></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-50 id=__codelineno-9-50 name=__codelineno-9-50></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chart-example.local</span><span class=w></span>
<a href=#__codelineno-9-51 id=__codelineno-9-51 name=__codelineno-9-51></a><span class=w>      </span><span class=nt>paths</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-52 id=__codelineno-9-52 name=__codelineno-9-52></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span><span class=w></span>
<a href=#__codelineno-9-53 id=__codelineno-9-53 name=__codelineno-9-53></a><span class=w>          </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ImplementationSpecific</span><span class=w></span>
<a href=#__codelineno-9-54 id=__codelineno-9-54 name=__codelineno-9-54></a><span class=w>  </span><span class=nt>tls</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[]</span><span class=w></span>
<a href=#__codelineno-9-55 id=__codelineno-9-55 name=__codelineno-9-55></a><span class=w>  </span><span class=c1>#  - secretName: chart-example-tls</span><span class=w></span>
<a href=#__codelineno-9-56 id=__codelineno-9-56 name=__codelineno-9-56></a><span class=w>  </span><span class=c1>#    hosts:</span><span class=w></span>
<a href=#__codelineno-9-57 id=__codelineno-9-57 name=__codelineno-9-57></a><span class=w>  </span><span class=c1>#      - chart-example.local</span><span class=w></span>
<a href=#__codelineno-9-58 id=__codelineno-9-58 name=__codelineno-9-58></a>
<a href=#__codelineno-9-59 id=__codelineno-9-59 name=__codelineno-9-59></a><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-60 id=__codelineno-9-60 name=__codelineno-9-60></a><span class=w>  </span><span class=c1># We usually recommend not to specify default resources and to leave this as a conscious</span><span class=w></span>
<a href=#__codelineno-9-61 id=__codelineno-9-61 name=__codelineno-9-61></a><span class=w>  </span><span class=c1># choice for the user. This also increases chances charts run on environments with little</span><span class=w></span>
<a href=#__codelineno-9-62 id=__codelineno-9-62 name=__codelineno-9-62></a><span class=w>  </span><span class=c1># resources, such as Minikube. If you do want to specify resources, uncomment the following</span><span class=w></span>
<a href=#__codelineno-9-63 id=__codelineno-9-63 name=__codelineno-9-63></a><span class=w>  </span><span class=c1># lines, adjust them as necessary, and remove the curly braces after 'resources:'.</span><span class=w></span>
<a href=#__codelineno-9-64 id=__codelineno-9-64 name=__codelineno-9-64></a><span class=w>  </span><span class=c1># limits:</span><span class=w></span>
<a href=#__codelineno-9-65 id=__codelineno-9-65 name=__codelineno-9-65></a><span class=w>  </span><span class=c1>#   cpu: 100m</span><span class=w></span>
<a href=#__codelineno-9-66 id=__codelineno-9-66 name=__codelineno-9-66></a><span class=w>  </span><span class=c1>#   memory: 128Mi</span><span class=w></span>
<a href=#__codelineno-9-67 id=__codelineno-9-67 name=__codelineno-9-67></a><span class=w>  </span><span class=c1># requests:</span><span class=w></span>
<a href=#__codelineno-9-68 id=__codelineno-9-68 name=__codelineno-9-68></a><span class=w>  </span><span class=c1>#   cpu: 100m</span><span class=w></span>
<a href=#__codelineno-9-69 id=__codelineno-9-69 name=__codelineno-9-69></a><span class=w>  </span><span class=c1>#   memory: 128Mi</span><span class=w></span>
<a href=#__codelineno-9-70 id=__codelineno-9-70 name=__codelineno-9-70></a>
<a href=#__codelineno-9-71 id=__codelineno-9-71 name=__codelineno-9-71></a><span class=nt>autoscaling</span><span class=p>:</span><span class=w></span>
<a href=#__codelineno-9-72 id=__codelineno-9-72 name=__codelineno-9-72></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<a href=#__codelineno-9-73 id=__codelineno-9-73 name=__codelineno-9-73></a><span class=w>  </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a href=#__codelineno-9-74 id=__codelineno-9-74 name=__codelineno-9-74></a><span class=w>  </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class=w></span>
<a href=#__codelineno-9-75 id=__codelineno-9-75 name=__codelineno-9-75></a><span class=w>  </span><span class=nt>targetCPUUtilizationPercentage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class=w></span>
<a href=#__codelineno-9-76 id=__codelineno-9-76 name=__codelineno-9-76></a><span class=w>  </span><span class=c1># targetMemoryUtilizationPercentage: 80</span><span class=w></span>
<a href=#__codelineno-9-77 id=__codelineno-9-77 name=__codelineno-9-77></a>
<a href=#__codelineno-9-78 id=__codelineno-9-78 name=__codelineno-9-78></a><span class=nt>nodeSelector</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<a href=#__codelineno-9-79 id=__codelineno-9-79 name=__codelineno-9-79></a>
<a href=#__codelineno-9-80 id=__codelineno-9-80 name=__codelineno-9-80></a><span class=nt>tolerations</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[]</span><span class=w></span>
<a href=#__codelineno-9-81 id=__codelineno-9-81 name=__codelineno-9-81></a>
<a href=#__codelineno-9-82 id=__codelineno-9-82 name=__codelineno-9-82></a><span class=nt>affinity</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
</code></pre></div> <h3 id=2-helm-install>步驟 2. helm install 部署<a class=headerlink href=#2-helm-install title="Permanent link">¶</a></h3> <p>進入這個 chart 的目錄:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a><span class=nb>cd</span> mychart
</code></pre></div> <p>部署這個 chart:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>helm install web mychart/
</code></pre></div> <p>命令結果如下所示:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>NAME: web
<a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>LAST DEPLOYED: Sat Aug  6 19:33:08 2022
<a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a>NAMESPACE: default
<a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a>STATUS: deployed
<a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a>REVISION: 1
<a href=#__codelineno-12-6 id=__codelineno-12-6 name=__codelineno-12-6></a>NOTES:
<a href=#__codelineno-12-7 id=__codelineno-12-7 name=__codelineno-12-7></a>1. Get the application URL by running these commands:
<a href=#__codelineno-12-8 id=__codelineno-12-8 name=__codelineno-12-8></a>  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=mychart,app.kubernetes.io/instance=web" -o jsonpath="{.items[0].metadata.name}")
<a href=#__codelineno-12-9 id=__codelineno-12-9 name=__codelineno-12-9></a>  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
<a href=#__codelineno-12-10 id=__codelineno-12-10 name=__codelineno-12-10></a>  echo "Visit http://127.0.0.1:8080 to use your application"
<a href=#__codelineno-12-11 id=__codelineno-12-11 name=__codelineno-12-11></a>  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
</code></pre></div> <p>命令查看可以看到已經部署成功:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a>helm list
</code></pre></div> <p>命令結果如下所示:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a>NAME    NAMESPACE   REVISION    UPDATED                                 STATUS      CHART           APP VERSION
<a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a>web     default     1           2022-08-06 19:33:08.884653922 +0800 CST deployed    mychart-0.1.0   1.16.0
</code></pre></div> <p>檢查 kubernetes 應用被佈署的狀態:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a>$ kubectl get all
<a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>
<a href=#__codelineno-15-3 id=__codelineno-15-3 name=__codelineno-15-3></a>NAME                               READY   STATUS    RESTARTS   AGE
<a href=#__codelineno-15-4 id=__codelineno-15-4 name=__codelineno-15-4></a><span class=hll>pod/web-mychart-5f94885968-wbwth   <span class=m>1</span>/1     Running   <span class=m>0</span>          4m38s
</span><a href=#__codelineno-15-5 id=__codelineno-15-5 name=__codelineno-15-5></a>
<a href=#__codelineno-15-6 id=__codelineno-15-6 name=__codelineno-15-6></a>NAME                  TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>   AGE
<a href=#__codelineno-15-7 id=__codelineno-15-7 name=__codelineno-15-7></a>service/kubernetes    ClusterIP   <span class=m>10</span>.43.0.1       &lt;none&gt;        <span class=m>443</span>/TCP   9h
<a href=#__codelineno-15-8 id=__codelineno-15-8 name=__codelineno-15-8></a>service/web-mychart   ClusterIP   <span class=m>10</span>.43.244.237   &lt;none&gt;        <span class=m>80</span>/TCP    4m38s
<a href=#__codelineno-15-9 id=__codelineno-15-9 name=__codelineno-15-9></a>
<a href=#__codelineno-15-10 id=__codelineno-15-10 name=__codelineno-15-10></a>NAME                          READY   UP-TO-DATE   AVAILABLE   AGE
<a href=#__codelineno-15-11 id=__codelineno-15-11 name=__codelineno-15-11></a>deployment.apps/web-mychart   <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           4m38s
<a href=#__codelineno-15-12 id=__codelineno-15-12 name=__codelineno-15-12></a>
<a href=#__codelineno-15-13 id=__codelineno-15-13 name=__codelineno-15-13></a>NAME                                     DESIRED   CURRENT   READY   AGE
<a href=#__codelineno-15-14 id=__codelineno-15-14 name=__codelineno-15-14></a>replicaset.apps/web-mychart-5f94885968   <span class=m>1</span>         <span class=m>1</span>         <span class=m>1</span>       4m38s
</code></pre></div> <p>讓我們使用 <code>kubectl port-forward</code> 來檢查被佈署的應用:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>kubectl port-forward service/web-mychart 8080:80 --address='0.0.0.0'
</code></pre></div> <p>端口轉發命令的語法如下。</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a>kubectl port-forward svc/<span class=o>[</span>service-name<span class=o>]</span> -n <span class=o>[</span>namespace<span class=o>]</span> <span class=o>[</span>external-port<span class=o>]</span>:<span class=o>[</span>internal-port<span class=o>]</span> --address<span class=o>=</span><span class=s1>'0.0.0.0'</span>
</code></pre></div> <p><a class=glightbox href=../assets/nginx-port-forward.png><img alt src=../assets/nginx-port-forward.png></a></p> <h3 id=3-helm-upgrade>步驟 3. helm upgrade 更新<a class=headerlink href=#3-helm-upgrade title="Permanent link">¶</a></h3> <p>helm 除了支持參數值參數傳遞，還支持動態傳輸，如下:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>helm install web mychart/ --set <span class=nv>replicaCount</span><span class=o>=</span><span class=m>2</span>
</code></pre></div> <p>由於在 <strong>步驟<a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk/mkdocs-material/issues/1 title="GitHub Issue: squidfunk/mkdocs-material #1">#1</a></strong> 我們己經進行了第一次的佈署，下列的命令可查詢佈署歷史:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>$ helm <span class=nb>history</span> web
<a href=#__codelineno-19-2 id=__codelineno-19-2 name=__codelineno-19-2></a>REVISION    UPDATED                     STATUS      CHART           APP VERSION DESCRIPTION     
<a href=#__codelineno-19-3 id=__codelineno-19-3 name=__codelineno-19-3></a><span class=m>1</span>           Sat Aug  <span class=m>6</span> <span class=m>19</span>:33:08 <span class=m>2022</span>    deployed    mychart-0.1.0   <span class=m>1</span>.16.0      Install <span class=nb>complete</span>
</code></pre></div> <p>讓我們使用參數傳遞的手法來更新己佈署的應用:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a>helm upgrade web mychart/ --set <span class=nv>replicaCount</span><span class=o>=</span><span class=m>2</span>
</code></pre></div> <p>命令結果如下:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a>Release "web" has been upgraded. Happy Helming!
<a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a>NAME: web
<a href=#__codelineno-21-3 id=__codelineno-21-3 name=__codelineno-21-3></a>LAST DEPLOYED: Sat Aug  6 20:11:31 2022
<a href=#__codelineno-21-4 id=__codelineno-21-4 name=__codelineno-21-4></a>NAMESPACE: default
<a href=#__codelineno-21-5 id=__codelineno-21-5 name=__codelineno-21-5></a>STATUS: deployed
<a href=#__codelineno-21-6 id=__codelineno-21-6 name=__codelineno-21-6></a>REVISION: 2
<a href=#__codelineno-21-7 id=__codelineno-21-7 name=__codelineno-21-7></a>NOTES:
<a href=#__codelineno-21-8 id=__codelineno-21-8 name=__codelineno-21-8></a>1. Get the application URL by running these commands:
<a href=#__codelineno-21-9 id=__codelineno-21-9 name=__codelineno-21-9></a>  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=mychart,app.kubernetes.io/instance=web" -o jsonpath="{.items[0].metadata.name}")
<a href=#__codelineno-21-10 id=__codelineno-21-10 name=__codelineno-21-10></a>  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
<a href=#__codelineno-21-11 id=__codelineno-21-11 name=__codelineno-21-11></a>  echo "Visit http://127.0.0.1:8080 to use your application"
<a href=#__codelineno-21-12 id=__codelineno-21-12 name=__codelineno-21-12></a>  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
</code></pre></div> <p>檢查應用被佈署的狀態:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a>$ kubectl get all
<a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a>
<a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a>NAME                               READY   STATUS    RESTARTS   AGE
<a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a><span class=hll>pod/web-mychart-5f94885968-wbwth   <span class=m>1</span>/1     Running   <span class=m>0</span>          40m
</span><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a><span class=hll>pod/web-mychart-5f94885968-x7mpp   <span class=m>1</span>/1     Running   <span class=m>0</span>          112s
</span><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a>
<a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a>NAME                  TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>   AGE
<a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a>service/kubernetes    ClusterIP   <span class=m>10</span>.43.0.1       &lt;none&gt;        <span class=m>443</span>/TCP   10h
<a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a>service/web-mychart   ClusterIP   <span class=m>10</span>.43.244.237   &lt;none&gt;        <span class=m>80</span>/TCP    40m
<a href=#__codelineno-22-10 id=__codelineno-22-10 name=__codelineno-22-10></a>
<a href=#__codelineno-22-11 id=__codelineno-22-11 name=__codelineno-22-11></a>NAME                          READY   UP-TO-DATE   AVAILABLE   AGE
<a href=#__codelineno-22-12 id=__codelineno-22-12 name=__codelineno-22-12></a>deployment.apps/web-mychart   <span class=m>2</span>/2     <span class=m>2</span>            <span class=m>2</span>           40m
<a href=#__codelineno-22-13 id=__codelineno-22-13 name=__codelineno-22-13></a>
<a href=#__codelineno-22-14 id=__codelineno-22-14 name=__codelineno-22-14></a>NAME                                     DESIRED   CURRENT   READY   AGE
<a href=#__codelineno-22-15 id=__codelineno-22-15 name=__codelineno-22-15></a>replicaset.apps/web-mychart-5f94885968   <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       40m
</code></pre></div> <p>可發現現在有 <strong>2</strong> Pods 被佈署起來。</p> <h3 id=4-helm-rollback>步驟 4. helm rollback 回滾<a class=headerlink href=#4-helm-rollback title="Permanent link">¶</a></h3> <p>現在 <code>web</code> 這個 release 己經有了多個版本的佈署記錄了。 <div class=highlight><pre><span></span><code><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a>$ helm history web
<a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a>
<a href=#__codelineno-23-3 id=__codelineno-23-3 name=__codelineno-23-3></a>REVISION    UPDATED                     STATUS      CHART           APP VERSION DESCRIPTION     
<a href=#__codelineno-23-4 id=__codelineno-23-4 name=__codelineno-23-4></a>1           Sat Aug  6 19:33:08 2022    superseded  mychart-0.1.0   1.16.0      Install complete
<a href=#__codelineno-23-5 id=__codelineno-23-5 name=__codelineno-23-5></a>2           Sat Aug  6 20:11:31 2022    deployed    mychart-0.1.0   1.16.0      Upgrade complete
</code></pre></div></p> <p>要進行版本回滾可使用下列命令:</p> <p>回滾到上一個版本：</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>helm rollback web
</code></pre></div> <p>回滚到指定版本：</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a>helm rollback web 1
</code></pre></div> <p>命令結果如下:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a>Rollback was a success! Happy Helming!
</code></pre></div> <h3 id=5-helm-uninstall>步驟 5. helm uninstall 卸載<a class=headerlink href=#5-helm-uninstall title="Permanent link">¶</a></h3> <p>和回滾一樣，helm uninstall 卸載也是 <strong>應用</strong> 等級的，不需要一個服務刪除:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a>helm uninstall web
</code></pre></div> <p>命令結果如下:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a>release "web" uninstalled
</code></pre></div> <p>檢查結果:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a>$ helm list
<a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a>NAME    NAMESPACE   REVISION    UPDATED STATUS  CHART   APP VERSION
<a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a>
<a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a>$ kubectl get all
<a href=#__codelineno-29-5 id=__codelineno-29-5 name=__codelineno-29-5></a>NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
<a href=#__codelineno-29-6 id=__codelineno-29-6 name=__codelineno-29-6></a>service/kubernetes   ClusterIP   10.43.0.1    &lt;none&gt;        443/TCP   10h
</code></pre></div> <h2 id=helm-yaml>helm 渲染 yaml<a class=headerlink href=#helm-yaml title="Permanent link">¶</a></h2> <p>有些時候當使用 helm 與 chart 來安裝應用進到 Kubernetes 時，當出現一些問題需要進行除錯的時候，我們會需要取得 helm 最後宣告進 kubernetes 集群時的 manifest (yaml) 檔案。</p> <p>經由下列的命令可驅動 helm 來渲染出相關的 yaml 檔案:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a>helm template web-demo mychart/
</code></pre></div> <p>檢查結果:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a>---
<a href=#__codelineno-31-2 id=__codelineno-31-2 name=__codelineno-31-2></a># Source: mychart/templates/serviceaccount.yaml
<a href=#__codelineno-31-3 id=__codelineno-31-3 name=__codelineno-31-3></a>apiVersion: v1
<a href=#__codelineno-31-4 id=__codelineno-31-4 name=__codelineno-31-4></a>kind: ServiceAccount
<a href=#__codelineno-31-5 id=__codelineno-31-5 name=__codelineno-31-5></a>metadata:
<a href=#__codelineno-31-6 id=__codelineno-31-6 name=__codelineno-31-6></a>  name: web-demo-mychart
<a href=#__codelineno-31-7 id=__codelineno-31-7 name=__codelineno-31-7></a>  labels:
<a href=#__codelineno-31-8 id=__codelineno-31-8 name=__codelineno-31-8></a>    helm.sh/chart: mychart-0.1.0
<a href=#__codelineno-31-9 id=__codelineno-31-9 name=__codelineno-31-9></a>    app.kubernetes.io/name: mychart
<a href=#__codelineno-31-10 id=__codelineno-31-10 name=__codelineno-31-10></a>    app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-11 id=__codelineno-31-11 name=__codelineno-31-11></a>    app.kubernetes.io/version: "1.16.0"
<a href=#__codelineno-31-12 id=__codelineno-31-12 name=__codelineno-31-12></a>    app.kubernetes.io/managed-by: Helm
<a href=#__codelineno-31-13 id=__codelineno-31-13 name=__codelineno-31-13></a>---
<a href=#__codelineno-31-14 id=__codelineno-31-14 name=__codelineno-31-14></a># Source: mychart/templates/service.yaml
<a href=#__codelineno-31-15 id=__codelineno-31-15 name=__codelineno-31-15></a>apiVersion: v1
<a href=#__codelineno-31-16 id=__codelineno-31-16 name=__codelineno-31-16></a>kind: Service
<a href=#__codelineno-31-17 id=__codelineno-31-17 name=__codelineno-31-17></a>metadata:
<a href=#__codelineno-31-18 id=__codelineno-31-18 name=__codelineno-31-18></a>  name: web-demo-mychart
<a href=#__codelineno-31-19 id=__codelineno-31-19 name=__codelineno-31-19></a>  labels:
<a href=#__codelineno-31-20 id=__codelineno-31-20 name=__codelineno-31-20></a>    helm.sh/chart: mychart-0.1.0
<a href=#__codelineno-31-21 id=__codelineno-31-21 name=__codelineno-31-21></a>    app.kubernetes.io/name: mychart
<a href=#__codelineno-31-22 id=__codelineno-31-22 name=__codelineno-31-22></a>    app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-23 id=__codelineno-31-23 name=__codelineno-31-23></a>    app.kubernetes.io/version: "1.16.0"
<a href=#__codelineno-31-24 id=__codelineno-31-24 name=__codelineno-31-24></a>    app.kubernetes.io/managed-by: Helm
<a href=#__codelineno-31-25 id=__codelineno-31-25 name=__codelineno-31-25></a>spec:
<a href=#__codelineno-31-26 id=__codelineno-31-26 name=__codelineno-31-26></a>  type: ClusterIP
<a href=#__codelineno-31-27 id=__codelineno-31-27 name=__codelineno-31-27></a>  ports:
<a href=#__codelineno-31-28 id=__codelineno-31-28 name=__codelineno-31-28></a>    - port: 80
<a href=#__codelineno-31-29 id=__codelineno-31-29 name=__codelineno-31-29></a>      targetPort: http
<a href=#__codelineno-31-30 id=__codelineno-31-30 name=__codelineno-31-30></a>      protocol: TCP
<a href=#__codelineno-31-31 id=__codelineno-31-31 name=__codelineno-31-31></a>      name: http
<a href=#__codelineno-31-32 id=__codelineno-31-32 name=__codelineno-31-32></a>  selector:
<a href=#__codelineno-31-33 id=__codelineno-31-33 name=__codelineno-31-33></a>    app.kubernetes.io/name: mychart
<a href=#__codelineno-31-34 id=__codelineno-31-34 name=__codelineno-31-34></a>    app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-35 id=__codelineno-31-35 name=__codelineno-31-35></a>---
<a href=#__codelineno-31-36 id=__codelineno-31-36 name=__codelineno-31-36></a># Source: mychart/templates/deployment.yaml
<a href=#__codelineno-31-37 id=__codelineno-31-37 name=__codelineno-31-37></a>apiVersion: apps/v1
<a href=#__codelineno-31-38 id=__codelineno-31-38 name=__codelineno-31-38></a>kind: Deployment
<a href=#__codelineno-31-39 id=__codelineno-31-39 name=__codelineno-31-39></a>metadata:
<a href=#__codelineno-31-40 id=__codelineno-31-40 name=__codelineno-31-40></a>  name: web-demo-mychart
<a href=#__codelineno-31-41 id=__codelineno-31-41 name=__codelineno-31-41></a>  labels:
<a href=#__codelineno-31-42 id=__codelineno-31-42 name=__codelineno-31-42></a>    helm.sh/chart: mychart-0.1.0
<a href=#__codelineno-31-43 id=__codelineno-31-43 name=__codelineno-31-43></a>    app.kubernetes.io/name: mychart
<a href=#__codelineno-31-44 id=__codelineno-31-44 name=__codelineno-31-44></a>    app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-45 id=__codelineno-31-45 name=__codelineno-31-45></a>    app.kubernetes.io/version: "1.16.0"
<a href=#__codelineno-31-46 id=__codelineno-31-46 name=__codelineno-31-46></a>    app.kubernetes.io/managed-by: Helm
<a href=#__codelineno-31-47 id=__codelineno-31-47 name=__codelineno-31-47></a>spec:
<a href=#__codelineno-31-48 id=__codelineno-31-48 name=__codelineno-31-48></a>  replicas: 1
<a href=#__codelineno-31-49 id=__codelineno-31-49 name=__codelineno-31-49></a>  selector:
<a href=#__codelineno-31-50 id=__codelineno-31-50 name=__codelineno-31-50></a>    matchLabels:
<a href=#__codelineno-31-51 id=__codelineno-31-51 name=__codelineno-31-51></a>      app.kubernetes.io/name: mychart
<a href=#__codelineno-31-52 id=__codelineno-31-52 name=__codelineno-31-52></a>      app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-53 id=__codelineno-31-53 name=__codelineno-31-53></a>  template:
<a href=#__codelineno-31-54 id=__codelineno-31-54 name=__codelineno-31-54></a>    metadata:
<a href=#__codelineno-31-55 id=__codelineno-31-55 name=__codelineno-31-55></a>      labels:
<a href=#__codelineno-31-56 id=__codelineno-31-56 name=__codelineno-31-56></a>        app.kubernetes.io/name: mychart
<a href=#__codelineno-31-57 id=__codelineno-31-57 name=__codelineno-31-57></a>        app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-58 id=__codelineno-31-58 name=__codelineno-31-58></a>    spec:
<a href=#__codelineno-31-59 id=__codelineno-31-59 name=__codelineno-31-59></a>      serviceAccountName: web-demo-mychart
<a href=#__codelineno-31-60 id=__codelineno-31-60 name=__codelineno-31-60></a>      securityContext:
<a href=#__codelineno-31-61 id=__codelineno-31-61 name=__codelineno-31-61></a>        {}
<a href=#__codelineno-31-62 id=__codelineno-31-62 name=__codelineno-31-62></a>      containers:
<a href=#__codelineno-31-63 id=__codelineno-31-63 name=__codelineno-31-63></a>        - name: mychart
<a href=#__codelineno-31-64 id=__codelineno-31-64 name=__codelineno-31-64></a>          securityContext:
<a href=#__codelineno-31-65 id=__codelineno-31-65 name=__codelineno-31-65></a>            {}
<a href=#__codelineno-31-66 id=__codelineno-31-66 name=__codelineno-31-66></a>          image: "nginx:1.16.0"
<a href=#__codelineno-31-67 id=__codelineno-31-67 name=__codelineno-31-67></a>          imagePullPolicy: IfNotPresent
<a href=#__codelineno-31-68 id=__codelineno-31-68 name=__codelineno-31-68></a>          ports:
<a href=#__codelineno-31-69 id=__codelineno-31-69 name=__codelineno-31-69></a>            - name: http
<a href=#__codelineno-31-70 id=__codelineno-31-70 name=__codelineno-31-70></a>              containerPort: 80
<a href=#__codelineno-31-71 id=__codelineno-31-71 name=__codelineno-31-71></a>              protocol: TCP
<a href=#__codelineno-31-72 id=__codelineno-31-72 name=__codelineno-31-72></a>          livenessProbe:
<a href=#__codelineno-31-73 id=__codelineno-31-73 name=__codelineno-31-73></a>            httpGet:
<a href=#__codelineno-31-74 id=__codelineno-31-74 name=__codelineno-31-74></a>              path: /
<a href=#__codelineno-31-75 id=__codelineno-31-75 name=__codelineno-31-75></a>              port: http
<a href=#__codelineno-31-76 id=__codelineno-31-76 name=__codelineno-31-76></a>          readinessProbe:
<a href=#__codelineno-31-77 id=__codelineno-31-77 name=__codelineno-31-77></a>            httpGet:
<a href=#__codelineno-31-78 id=__codelineno-31-78 name=__codelineno-31-78></a>              path: /
<a href=#__codelineno-31-79 id=__codelineno-31-79 name=__codelineno-31-79></a>              port: http
<a href=#__codelineno-31-80 id=__codelineno-31-80 name=__codelineno-31-80></a>          resources:
<a href=#__codelineno-31-81 id=__codelineno-31-81 name=__codelineno-31-81></a>            {}
<a href=#__codelineno-31-82 id=__codelineno-31-82 name=__codelineno-31-82></a>---
<a href=#__codelineno-31-83 id=__codelineno-31-83 name=__codelineno-31-83></a># Source: mychart/templates/tests/test-connection.yaml
<a href=#__codelineno-31-84 id=__codelineno-31-84 name=__codelineno-31-84></a>apiVersion: v1
<a href=#__codelineno-31-85 id=__codelineno-31-85 name=__codelineno-31-85></a>kind: Pod
<a href=#__codelineno-31-86 id=__codelineno-31-86 name=__codelineno-31-86></a>metadata:
<a href=#__codelineno-31-87 id=__codelineno-31-87 name=__codelineno-31-87></a>  name: "web-demo-mychart-test-connection"
<a href=#__codelineno-31-88 id=__codelineno-31-88 name=__codelineno-31-88></a>  labels:
<a href=#__codelineno-31-89 id=__codelineno-31-89 name=__codelineno-31-89></a>    helm.sh/chart: mychart-0.1.0
<a href=#__codelineno-31-90 id=__codelineno-31-90 name=__codelineno-31-90></a>    app.kubernetes.io/name: mychart
<a href=#__codelineno-31-91 id=__codelineno-31-91 name=__codelineno-31-91></a>    app.kubernetes.io/instance: web-demo
<a href=#__codelineno-31-92 id=__codelineno-31-92 name=__codelineno-31-92></a>    app.kubernetes.io/version: "1.16.0"
<a href=#__codelineno-31-93 id=__codelineno-31-93 name=__codelineno-31-93></a>    app.kubernetes.io/managed-by: Helm
<a href=#__codelineno-31-94 id=__codelineno-31-94 name=__codelineno-31-94></a>  annotations:
<a href=#__codelineno-31-95 id=__codelineno-31-95 name=__codelineno-31-95></a>    "helm.sh/hook": test
<a href=#__codelineno-31-96 id=__codelineno-31-96 name=__codelineno-31-96></a>spec:
<a href=#__codelineno-31-97 id=__codelineno-31-97 name=__codelineno-31-97></a>  containers:
<a href=#__codelineno-31-98 id=__codelineno-31-98 name=__codelineno-31-98></a>    - name: wget
<a href=#__codelineno-31-99 id=__codelineno-31-99 name=__codelineno-31-99></a>      image: busybox
<a href=#__codelineno-31-100 id=__codelineno-31-100 name=__codelineno-31-100></a>      command: ['wget']
<a href=#__codelineno-31-101 id=__codelineno-31-101 name=__codelineno-31-101></a>      args: ['web-demo-mychart:80']
<a href=#__codelineno-31-102 id=__codelineno-31-102 name=__codelineno-31-102></a>  restartPolicy: Never
</code></pre></div> </article> </div> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: Helm 入門教學" class="md-footer__link md-footer__link--prev" href=../helm-intro/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Helm 入門教學 </div> </div> </a> <a aria-label="Next: Kustomize 入門教學" class="md-footer__link md-footer__link--next" href=../helm-intro/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Kustomize 入門教學 </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.6c7ad80a.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "width": "100%", "height": "auto", "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom"});})</script></body> </html>